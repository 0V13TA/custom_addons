<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Replace the entire login layout -->
    <template id="login_layout" inherit_id="web.login_layout">
        <xpath expr="." position="replace">
            <t t-call="web.frontend_layout">
                <t t-set="html_data" t-value="{'style': 'height: 100%;'}"/>
                <t t-set="body_classname" t-value="'hemis_login_body'"/>
                <t t-set="no_header" t-value="True"/>
                <t t-set="no_footer" t-value="True"/>

                <!-- Header Bar — Same as Footer -->
                <header class="hemis_header">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col text-center">
                                <h1 class="hemis_title">EnterpriseOne</h1>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Main Content -->
                <main class="hemis_main">
                    <div class="container py-5">
                        <div class="row justify-content-center">
                            <div class="col-md-8 col-lg-7 col-xl-6">
                                <div class="card hemis_login_card shadow-sm ">
                                    <div class="card-body p-0">
                                        <div class="row g-0">
                                            <!-- Left Info Panel — Gradient Purple -->
                                            <div class="col-md-6 p-4 d-flex flex-column justify-content-center" 
                                                 style="background: linear-gradient(135deg,  #0165fc 100%);">
                                                <div class="text-center mb-3">
                                                <img src="/enterprise_theme/static/src/img/company_logo.svg" alt="TU Logo" style="height: 130px; width: auto; object-fit: cover;"/>
                                                    <h3 class="mt-1 mb-0 text-white">Welcome </h3>
                                                    <h3 class="mb-2 text-white">to</h3>
                                                    <h4 class="mb-3 text-white">EnterpriseOne</h4>
                                                </div>
                                                <p class="text-white text-center px-2" style="font-size: 0.95rem; line-height: 1.5;">
                                                    Sign in to access administrative modules such as Accounts, Payroll and Inventory.
                                                </p>
                                            </div>

                                            <!-- Right Login Form — Normal White Background -->
                                            <div class="col-md-6 p-4 d-flex flex-column justify-content-center">
                                                <h3 class="text-center mb-4" style="color: #0165fc;">User Login</h3>
                                                <div class="login-form-container">
                                                    <t t-out="0"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer class="hemis_footer">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col">
                                <ul class="hemis_footer_links">
                                    <li><a href="#">About</a></li>
                                    <li><a href="#">Contact</a></li>
                                    <li><a href="#">Terms</a></li>
                                    <li><a href="#">Privacy</a></li>
                                </ul>
                            </div>
                            <div class="col-auto">
                                <span class="hemis_developer_text">Developed and Managed by: <a href="https://www.enterpriseone.com.ng/" target="_blank" rel="noopener" style="color: white; text-decoration: underline; opacity: 0.9;">
            ENTERPRISE ONE
        </a></span>
                            </div>
                        </div>
                    </div>
                </footer>

                <!-- Styles -->
                <style>
/* <![CDATA[ */
                    .hemis_login_body {
                        background-color: #f8f9fa;
                        margin: 0;
                        padding: 0;
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                    }

                    .hemis_header {
                        background-color: #0165fc;
                        padding: 12px 0;
                        box-shadow: 0 2px 6px rgba(0,0,0,0.08);
                    }
                    .hemis_title {
                        color: white;
                        font-size: 18px;
                        font-weight: 600;
                        margin: 0;
                        letter-spacing: 0.5px;
                    }

                    .hemis_login_card {
                        border: 2px solid #0165fc
                        border-radius: 10px;
                        overflow: hidden;
                        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
                    }

                    .login-form-container {
                        color: #333;
                    }
                    .login-form-container .form-label,
                    .login-form-container .text-danger,
                    .login-form-container .form-check-label {
                        color: #333;
                    }

                    /* === PASSWORD VISIBILITY BUTTON === */
                    .password-toggle-container {
                        position: relative;
                        width: 100%;
                    }
                    .password-toggle-container input {
                        width: 100%;
                        padding: 12px 40px 12px 16px;
                        font-size: 15px;
                        border: 1px solid #ced4da;
                        border-radius: 4px;
                        box-sizing: border-box;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    }
                    .password-toggle-btn {
                        position: absolute;
                        right: 12px;
                        top: 50%;
                        transform: translateY(-50%);
                        background: none;
                        border: none;
                        color: #6c757d;
                        cursor: pointer;
                        font-size: 16px;
                        width: 24px;
                        height: 24px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    .password-toggle-btn:hover {
                        color: #0165fc;
                    }

                    /* === STANDARD EMAIL INPUT === */
                    .login-form-container .email-input {
                        width: 100%;
                        padding: 12px 16px;
                        font-size: 15px;
                        border: 1px solid #ced4da;
                        border-radius: 4px;
                        box-sizing: border-box;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    }

                    .login-form-container .btn-primary {
                        background-color: #0165fc !important;
                        color: white !important;
                        border: none;
                        font-weight: 600;
                        padding: 12px;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                        border-radius: 4px;
                        width: 100%;
                        box-sizing: border-box;
                        font-size: 16px;
                    }
                    .login-form-container .btn-primary:hover {
                        background-color: #0165fc !important;
                        color: white !important;
                    }
                    .login-form-container .alert {
                        color: #333;
                        background-color: #ffffff;
                        border: none;
                        border-radius: 4px;
                        padding: 10px;
                    }
                    .login-form-container .hemis_forgot_link {
                        color: #0165fc;
                        text-decoration: none;
                        font-size: 14px;
                    }
                    .login-form-container .hemis_forgot_link:hover {
                        text-decoration: underline;
                    }

                    /* Footer */
                    .hemis_footer {
                        background-color: #0165fc;
                        color: white;
                        padding: 12px 0;
                        position: fixed;
                        bottom: 0;
                        width: 100%;
                        font-size: 13px;
                    }
                    .hemis_footer_links {
                        list-style: none;
                        display: flex;
                        margin: 0;
                        padding: 0;
                    }
                    .hemis_footer_links li {
                        margin-right: 20px;
                    }
                    .hemis_footer_links a {
                        color: white;
                        text-decoration: none;
                        opacity: 0.9;
                    }
                    .hemis_footer_links a:hover {
                        text-decoration: underline;
                        opacity: 1;
                    }
                    .hemis_developer_text {
                        color: white;
                        opacity: 0.9;
                    }

                   

                    /* === OAUTH "CHOOSE A USER" DROPDOWN === */
                    .o_login_user_selector {
                        width: 100% !important;
                        max-width: none !important;
                        padding: 0 !important;
                        margin: 0 !important;
                    }
                    .o_login_user_selector .o_login_user_item {
                        width: 100% !important;
                        padding: 12px 16px !important;
                        font-size: 15px !important;
                        border-radius: 4px !important;
                        border: 1px solid #ced4da !important;
                        background-color: #0165fc !important;
                        color: #333 !important;
                        box-sizing: border-box !important;
                        display: flex !important;
                        align-items: center !important;
                        white-space: nowrap !important;
                        overflow: hidden !important;
                        text-overflow: ellipsis !important;
                    }
                    .o_login_user_selector .o_login_user_item:hover {
                        background-color: #f8f9fa !important;
                        border-color: #0165fc !important;
                    }
                    .o_login_user_selector .o_login_user_avatar {
                        width: 24px !important;
                        height: 24px !important;
                        margin-right: 12px !important;
                        border-radius: 50% !important;
                        object-fit: cover !important;
                        flex-shrink: 0 !important;
                    }
                    .o_login_user_selector .o_login_user_email {
                        flex: 1 !important;
                        overflow: hidden !important;
                        text-overflow: ellipsis !important;
                        white-space: nowrap !important;
                        font-weight: normal !important;
                        color: #333 !important;
                    }
                    .o_login_use_another_user {
                        display: block !important;
                        width: 100% !important;
                        text-align: center !important;
                        padding: 8px 0 !important;
                        font-size: 14px !important;
                        color: #6c757d !important;
                        text-decoration: none !important;
                    }
                    .o_login_use_another_user:hover {
                        color: #0165fc !important;
                        text-decoration: underline !important;
                    }

                    /* Responsive */
                    @media (max-width: 768px) {
                        .hemis_login_card {
                            flex-direction: column;
                        }
                        .col-md-6 {
                            width: 100%;
                        }
                        .hemis_header h1 {
                            font-size: 16px;
                        }
                        .login-form-container .email-input,
                        .password-toggle-container input,
                        .o_login_user_selector .o_login_user_item {
                            font-size: 14px !important;
                            padding: 10px 14px !important;
                        }
                        .password-toggle-btn {
                            right: 10px !important;
                            font-size: 14px !important;
                        }
                        .login-form-container .btn-primary {
                            font-size: 14px !important;
                            padding: 10px !important;
                        }
                        .hemis_footer {
                            font-size: 12px;
                        }
                    }
/* ]]> */
                </style>

                <!-- Password Toggle Script -->
                <script>
//<![CDATA[
document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.querySelector('.password-toggle-btn');
    const passwordInput = document.querySelector('#password');
    const eyeIcon = toggleBtn ? toggleBtn.querySelector('i') : null;

    if (toggleBtn && passwordInput && eyeIcon) {
        toggleBtn.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            if (type === 'password') {
                eyeIcon.className = 'fa fa-eye-slash';
                this.title = 'Show password';
            } else {
                eyeIcon.className = 'fa fa-eye';
                this.title = 'Hide password';
            }
        });
    }
});
//]]>
                </script>
            </t>
        </xpath>
    </template>

    <!-- Custom login form with password toggle -->
    <template id="login" inherit_id="web.login">
        <xpath expr="//form" position="replace">
            <form t-attf-class="oe_login_form" role="form" t-attf-action="/web/login" method="post" onsubmit="this.action = '/web/login' + location.hash">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                <!-- Hidden DB selector -->
                <div t-if="databases and len(databases) > 1" class="d-none">
                    <input type="text" name="db" t-att-value="request.db" id="db" class="form-control" required="required" readonly="readonly"/>
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label for="login" class="form-label">Email Address <span class="text-danger">*</span></label>
                    <input type="text" name="login" t-att-value="login" id="login" 
                           class="form-control email-input" 
                           required="required" 
                           autofocus="autofocus" 
                           autocapitalize="off" 
                           autocomplete="username"
                           style="width: 100%; box-sizing: border-box; padding: 12px; font-size: 15px;"/>
                </div>

                <!-- Password with eye icon -->
                <div class="form-group">
                    <label for="password" class="form-label">Password <span class="text-danger">*</span></label>
                    <div class="password-toggle-container">
                        <input type="password" name="password" id="password" 
                               class="form-control" 
                               required="required" 
                               autocomplete="current-password" 
                               maxlength="4096"/>
                        <button type="button" class="password-toggle-btn" title="Show password">
                            <i class="fa fa-eye"></i>
                        </button>
                    </div>
                </div>

                <!-- Remember me -->
                <div class="form-check mb-3">
                    <input type="checkbox" id="remember_me" class="form-check-input"/>
                    <label class="form-check-label" for="remember_me">Remember me</label>
                </div>

                <!-- Messages -->
                <p class="alert alert-danger" t-if="error" role="alert">
                    <t t-esc="error"/>
                </p>
                <p class="alert alert-success" t-if="message" role="status">
                    <t t-esc="message"/>
                </p>

                <!-- Login button -->
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">SIGN IN</button>
                </div>

                <!-- Forgot password -->
                <div class="text-center mt-2">
                    <a href="#" class="hemis_forgot_link">Forgot password?</a>
                </div>

                <input type="hidden" name="redirect" t-att-value="redirect"/>
            </form>
        </xpath>
    </template>
</odoo>